# æœ€ç»ˆä¼˜åŒ–ç‰ˆ dolphin_slam_params.yaml
# é…åˆä¿®å¤ç‰ˆ place_cell_node.py ä½¿ç”¨

robot_state_node:
  ros__parameters:
    navigation_csv: "/media/psf/Samsung T7/SLAM Data/Sunboat_03-09-2023/2023-09-03-07-58-37/navigation/navigation.csv"
    base_frame: "base_link"
    odom_frame: "odom"
    map_frame: "map"
    publish_rate: 20.0
    publish_tf: true

image_processing_node:
  ros__parameters:
    feature_type: "SIFT"
    max_features: 200
    process_every_n_frames: 1
    enable_visualization: true
    camera_topic: "/camera/image_raw"
    sonar_topic: "/sonar/image_raw"
    descriptors_topic: "/features/descriptors"
    keypoints_topic: "/features/keypoints"
    
    # SIFTå‚æ•°ä¼˜åŒ–ï¼ˆæ°´ä¸‹ç¯å¢ƒï¼‰
    sift_n_features: 200
    sift_contrastThreshold: 0.03
    sift_edgeThreshold: 20
    sift_sigma: 1.2

local_view_node:
  ros__parameters:
    matching_algorithm: "temporal_feature_matching"
    similarity_threshold: 0.5
    max_templates: 25
    enable_debug: false
    debug_level: 0
    min_match_count: 12
    match_ratio_threshold: 0.75
    temporal_weight_factor: 3.0
    recent_template_priority: 8
    descriptors_topic: "/features/descriptors"
    matches_topic: "/local_view/matches"
    enable_underwater_report: false
    
    # å¹³è¡¡çš„æ°´ä¸‹ç¯å¢ƒå‚æ•°
    underwater_mode: true
    frame_skip_threshold: 0.9
    max_matches_per_second: 20
    min_template_age: 2.0
    significant_change_threshold: 0.08
    temporal_smoothing_window: 3

# ğŸ”§ æœ€ç»ˆä¼˜åŒ–çš„ä½ç½®ç»†èƒå‚æ•°
place_cell_node:
  ros__parameters:
    # åŸºç¡€å‚æ•°
    visual_similarity_threshold: 0.7
    enable_visual_debug: false
    neurons_per_dimension: 16
    update_rate: 20.0
    major_report_interval: 300
    spatial_scale: 30.0                     # ä¿æŒ30mç©ºé—´å°ºåº¦
    enable_path_integration: true
    odometry_topic: "/dolphin_slam/odometry"
    visual_match_topic: "/local_view/matches"
    activity_topic: "/place_cells/activity"
    
    # ä¼˜åŒ–çš„CANå‚æ•°
    excitation_radius: 1.3
    inhibition_strength: 0.3
    activity_threshold: 0.1
    normalization_factor: 8.0
    visual_update_cooldown: 0.5
    min_visual_change_threshold: 0.03
    
    # ğŸ”§ å¢å¼ºçš„æŠ‘åˆ¶å‚æ•°
    global_inhibition_factor: 0.5
    winner_take_all_strength: 0.3
    lateral_inhibition_radius: 2.0
    decay_rate: 0.12                        # ğŸ”§ å¢åŠ è¡°å‡ç‡ï¼Œå‡å°‘æƒ¯æ€§
    
    # ğŸ”§ å¼ºåŒ–çš„è¾“å…¥å¼ºåº¦å‚æ•°
    position_input_strength: 4.0
    visual_input_strength: 2.0
    position_input_override: 40.0           # ğŸ”§ å¤§å¹…å¢å¼ºä½ç½®è¾“å…¥
    
    # ğŸ”§ ç²¾ç¡®è·Ÿè¸ªå‚æ•°
    movement_threshold: 0.05                # ç§»åŠ¨æ£€æµ‹é˜ˆå€¼
    enable_position_debug: true             # å¯ç”¨è¯¦ç»†è°ƒè¯•
    center_tracking_strength: 0.7           # ä¸­å¿ƒè·Ÿè¸ªå¼ºåº¦

experience_map_node:
  ros__parameters:
    odometry_topic: "/dolphin_slam/odometry"
    place_cell_topic: "/place_cells/activity"
    visual_match_topic: "/local_view/matches"
    match_threshold: 0.75
