# ä¿®å¤ç‰ˆ Dolphin SLAM é…ç½®æ–‡ä»¶
# ç»Ÿä¸€è¯é¢˜å‘½åï¼Œç¡®ä¿èŠ‚ç‚¹é—´æ­£ç¡®é€šä¿¡

robot_state_node:
  ros__parameters:
    navigation_csv: "/media/psf/Samsung T7/SLAM Data/Sunboat_03-09-2023/2023-09-03-07-58-37/navigation/navigation.csv"
    base_frame: "base_link"
    odom_frame: "odom"
    map_frame: "map"
    publish_rate: 20.0
    publish_tf: true

image_processing_node:
  ros__parameters:
    feature_type: "SIFT"
    max_features: 200                                # å‡å°‘ç‰¹å¾æ•°é‡ï¼Œæé«˜å¤„ç†é€Ÿåº¦
    process_every_n_frames: 1                        # å¤„ç†æ¯ä¸€å¸§ï¼ˆæ°´ä¸‹å˜åŒ–æ…¢ï¼‰
    enable_visualization: true
    camera_topic: "/camera/image_raw"
    sonar_topic: "/sonar/image_raw"
    descriptors_topic: "/features/descriptors"
    keypoints_topic: "/features/keypoints"
    
    # SIFTå‚æ•°ä¼˜åŒ–ï¼ˆæ°´ä¸‹ç¯å¢ƒï¼‰
    sift_n_features: 200
    sift_contrastThreshold: 0.03                     # é™ä½å¯¹æ¯”åº¦é˜ˆå€¼ï¼ˆæ°´ä¸‹å¯¹æ¯”åº¦ä½ï¼‰
    sift_edgeThreshold: 20                           # å¢åŠ è¾¹ç¼˜é˜ˆå€¼ï¼ˆæ›´å®½æ¾ï¼‰
    sift_sigma: 1.2

# åŒæ—¶ä¼˜åŒ–local_view_nodeå‚æ•°
local_view_node:
  ros__parameters:
    matching_algorithm: "temporal_feature_matching"
    similarity_threshold: 0.5                  # ğŸ”§ é™ä½é˜ˆå€¼ (0.6â†’0.5)
    max_templates: 25                          # ğŸ”§ å¢åŠ æ¨¡æ¿æ•° (20â†’25)
    enable_debug: false
    debug_level: 0
    min_match_count: 12                        # ğŸ”§ é™ä½åŒ¹é…æ•° (15â†’12)
    match_ratio_threshold: 0.75                # ğŸ”§ æé«˜æ¯”ä¾‹é˜ˆå€¼ (0.7â†’0.75)
    temporal_weight_factor: 3.0                # ğŸ”§ é™ä½æ—¶é—´æƒé‡ (5.0â†’3.0)
    recent_template_priority: 8                # ğŸ”§ å¢åŠ ä¼˜å…ˆæ£€æŸ¥æ•° (5â†’8)
    descriptors_topic: "/features/descriptors"
    matches_topic: "/local_view/matches"
    enable_underwater_report: false
    
    # ğŸ”§ å¹³è¡¡çš„æ°´ä¸‹ç¯å¢ƒå‚æ•°
    underwater_mode: true
    frame_skip_threshold: 0.9                  # ğŸ”§ é™ä½è·³è¿‡é˜ˆå€¼ (0.8â†’0.9)
    max_matches_per_second: 20                 # ğŸ”§ å¢åŠ åŒ¹é…é™åˆ¶ (10â†’20)
    min_template_age: 2.0                      # ğŸ”§ é™ä½æ¨¡æ¿å¹´é¾„ (3.0â†’2.0)
    significant_change_threshold: 0.08         # ğŸ”§ é™ä½æ˜¾è‘—å˜åŒ–é˜ˆå€¼ (0.15â†’0.08)
    temporal_smoothing_window: 3               # ğŸ”§ å‡å°‘å¹³æ»‘çª—å£ (5â†’3)
    
# ä¼˜åŒ–çš„CANå’Œè§†è§‰å‚æ•°é…ç½®
place_cell_node:
  ros__parameters:
    # åŸºç¡€å‚æ•°
    visual_similarity_threshold: 0.7
    enable_visual_debug: false
    neurons_per_dimension: 16
    update_rate: 20.0
    major_report_interval: 300
    spatial_scale: 30.0
    enable_path_integration: true
    odometry_topic: "/dolphin_slam/odometry"
    visual_match_topic: "/local_view/matches"
    activity_topic: "/place_cells/activity"
    
    # å¹³è¡¡çš„CANå‚æ•°
    excitation_radius: 1.0
    inhibition_strength: 0.5
    activity_threshold: 0.15
    normalization_factor: 5.0
    visual_update_cooldown: 1.0
    min_visual_change_threshold: 0.1
    
    # æŠ‘åˆ¶å‚æ•°
    global_inhibition_factor: 0.5
    winner_take_all_strength: 0.3
    lateral_inhibition_radius: 1.0
    decay_rate: 0.08
    
    # è¾“å…¥å¼ºåº¦å‚æ•°
    position_input_strength: 12.0
    visual_input_strength: 1.0
    
    # ğŸ”§ è°ƒè¯•å¢å¼ºå‚æ•°
    movement_threshold: 0.01                    # ğŸ”§ å¤§å¹…é™ä½ç§»åŠ¨æ£€æµ‹é˜ˆå€¼
    enable_position_debug: true                 # ğŸ”§ å¯ç”¨ä½ç½®è°ƒè¯•
    position_input_override: 80.0                # ğŸ”§ ä½ç½®è¾“å…¥è¦†ç›–å¼ºåº¦
    center_tracking_strength: 3.0               # ğŸ”§ ä¸­å¿ƒè·Ÿè¸ªå¼ºåº¦
    
experience_map_node:
  ros__parameters:
    odometry_topic: "/dolphin_slam/odometry"    # ä¿®æ­£ï¼šç»Ÿä¸€ä½¿ç”¨dolphin_slamå‘½åç©ºé—´
    place_cell_topic: "/place_cells/activity"
    visual_match_topic: "/local_view/matches"
    match_threshold: 0.75
    


