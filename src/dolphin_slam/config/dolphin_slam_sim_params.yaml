# Dolphin SLAM ä»¿çœŸä¸“ç”¨é…ç½®
# ä½¿ç”¨Gazeboå®æ—¶ä¼ æ„Ÿå™¨æ•°æ®ï¼Œä¸ä½¿ç”¨æ•°æ®é›†æ–‡ä»¶

# ğŸ”§ ä¿®æ­£ç‰ˆä½ç½®ç»†èƒç½‘ç»œ - ç¨³å®šçš„CANå‚æ•°
place_cell_node:
  ros__parameters:
    # ç½‘ç»œç»“æ„
    neurons_per_dimension: 16
    spatial_scale: 30.0
    update_rate: 20.0
    
    # ğŸ”§ ç¨³å®šçš„CANåŠ¨åŠ›å­¦å‚æ•°
    excitation_strength: 1.2      # å¢å¼ºå±€éƒ¨å…´å¥‹
    inhibition_strength: 0.2      # å‡å¼±è¿œç¨‹æŠ‘åˆ¶
    excitation_radius: 1.0        # çŸ­ç¨‹å…´å¥‹åŠå¾„
    inhibition_radius: 2.5        # ä¸­ç¨‹æŠ‘åˆ¶åŠå¾„
    time_constant: 0.1            # ç¨³å®šçš„æ—¶é—´å¸¸æ•°
    min_activity_threshold: 0.1   # æ´»åŠ¨é˜ˆå€¼
    activity_maintenance: 0.5     # ç»´æŒè¾“å…¥å¼ºåº¦
    
    # è¯é¢˜é…ç½®
    odometry_topic: "/dolphin_slam/odometry"
    visual_match_topic: "/local_view/matches"
    activity_topic: "/place_cells/activity"

# ğŸ”§ ä¿®æ­£ç‰ˆå›¾åƒå¤„ç† - è¿æ¥Gazeboå®æ—¶ä¼ æ„Ÿå™¨
image_processing_node:
  ros__parameters:
    # ğŸš« ç§»é™¤æ•°æ®é›†è·¯å¾„ï¼Œä»…ä½¿ç”¨å®æ—¶ä¼ æ„Ÿå™¨
    # camera_path: ""  # ä»¿çœŸä¸­ä¸ä½¿ç”¨
    # sonar_path: ""   # ä»¿çœŸä¸­ä¸ä½¿ç”¨
    
    # å®æ—¶ä¼ æ„Ÿå™¨è¯é¢˜
    camera_topic: "/forward_camera/image_raw"       # Gazeboç›¸æœº
    sonar_topic: "/sonar/image_raw"                 # Gazeboå£°å‘
    descriptors_topic: "/features/descriptors"
    keypoints_topic: "/features/keypoints"
    
    # ç‰¹å¾æå–å‚æ•°
    feature_type: "SIFT"
    max_features: 300              # ä»¿çœŸä¸­å‡å°‘ç‰¹å¾æ•°é‡
    surf_hessian_threshold: 400
    surf_upright: false
    process_every_n_frames: 3      # ä»¿çœŸä¸­é™ä½å¤„ç†é¢‘ç‡
    enable_visualization: true
    
    # ğŸ”§ ä»¿çœŸä¼˜åŒ–å‚æ•°
    enable_clahe: true             # å¯ç”¨å¯¹æ¯”åº¦å¢å¼º
    clahe_clip_limit: 2.0
    clahe_tile_grid_size: 8

# ğŸ”§ ä¿®æ­£ç‰ˆå±€éƒ¨è§†è§‰ - å®æ—¶å¤„ç†
local_view_node:
  ros__parameters:
    # è¾“å…¥/è¾“å‡ºè¯é¢˜
    descriptors_topic: "/features/descriptors"
    matches_topic: "/local_view/matches"
    
    # åŒ¹é…å‚æ•°
    matching_algorithm: "temporal_feature_matching"
    similarity_threshold: 0.5      # ä»¿çœŸä¸­é™ä½é˜ˆå€¼
    max_templates: 50              # ä»¿çœŸä¸­å‡å°‘æ¨¡æ¿æ•°é‡
    min_match_count: 8             # é™ä½åŒ¹é…è¦æ±‚
    match_ratio_threshold: 0.75
    
    # ğŸ”§ ä»¿çœŸç¯å¢ƒç‰¹å®šå‚æ•°
    underwater_mode: true
    frame_skip_threshold: 0.7      # é€‚åº¦è·³å¸§
    max_matches_per_second: 5      # é™åˆ¶åŒ¹é…é¢‘ç‡
    min_template_age: 2.0          # å‡å°‘æ¨¡æ¿å¹´é¾„è¦æ±‚
    significant_change_threshold: 0.2
    temporal_smoothing_window: 3
    
    # è°ƒè¯•
    enable_debug: true
    debug_level: 1

# ç»éªŒåœ°å›¾
experience_map_node:
  ros__parameters:
    match_threshold: 0.6           # ä»¿çœŸä¸­é™ä½é˜ˆå€¼
    lv_factor: 0.6                 # å¢åŠ è§†è§‰æƒé‡
    pc_factor: 0.4                 # å‡å°‘ä½ç½®ç»†èƒæƒé‡
    min_experience_age: 3
    loop_closure_threshold: 0.7
    max_loop_distance: 8.0
    map_pruning_enabled: true
    max_experiences: 1000          # ä»¿çœŸä¸­é™åˆ¶ç»éªŒæ•°é‡
    
    # è¯é¢˜
    place_cell_topic: "/place_cells/activity"
    local_view_topic: "/local_view/matches"
    experience_topic: "/experience_map/experiences"
    loop_closure_topic: "/experience_map/loop_closures"
    odometry_topic: "/dolphin_slam/odometry"

# ğŸ”§ ç®€åŒ–çš„æœºå™¨äººçŠ¶æ€ - ä»…ç”¨äºä»¿çœŸ
robot_state_node:
  ros__parameters:
    # ğŸš« ç§»é™¤æ•°æ®é›†æ–‡ä»¶è·¯å¾„
    # navigation_csv: ""  # ä»¿çœŸä¸­ä¸ä½¿ç”¨
    
    # ä»¿çœŸä¼ æ„Ÿå™¨è¯é¢˜
    dvl_topic: "/dvl/data"
    imu_topic: "/imu/data"
    base_frame: "base_link"
    odom_frame: "odom"
    map_frame: "map"
    
    # ä¼ æ„Ÿå™¨ä½ç½®ï¼ˆç›¸å¯¹äºbase_linkï¼‰
    dvl_position:
      x: 0.3
      y: 0.0
      z: -0.2
    dvl_orientation:
      roll: 0.0
      pitch: 0.0
      yaw: 0.0
      
    # æ»¤æ³¢å‚æ•°
    use_ekf: false                 # ä»¿çœŸä¸­ç®€åŒ–
    process_noise_std: 0.05
    measurement_noise_std: 0.02
    publish_tf: false              # è®©gazeboå¤„ç†TF
    publish_rate: 10.0             # é™ä½é¢‘ç‡

# æ€§èƒ½å’Œè°ƒè¯•
performance:
  reduce_features: true
  reduced_network_size: 16
  enable_profiling: false
  debug_topics: true
